{% extends 'layout.html' %}

{% block content %}
        <form role="search">
            <div class="search-control">
                <input type="search" id="site-search" name="q"
                placeholder="Search...">
                <button>Search</button>
            </div>    
        </form>

    {% for question in questions %}
    <div class="content">
        <h2><a href="/question/{{question['id']}}"> {{ question["title"] }}</h2></a>
        {% if question_id %}

            <p><h3>{{ question["message"]}}...</h3></p>

        {% else %}

            <p><h3>{{ question["message"][:300] }}...</h3></p>

        {% endif %}

                <div class="vote">
                    <a href="/question/{{question['id']}}/vote-up"><img src="{{ url_for('static', filename='1arrow_up.png') }}"></a>
                    
                    <p  class="buttons">Votes: {{ question["vote_number"] }}</p>
                    
                    <a href="/question/{{question['id']}}/vote-down"><img src="{{ url_for('static', filename='1arrow_down.png') }}"></a>
                </div>
                
                {% if question_id %}
                <div class="buttons">
                <form class="buttons" action="/question/{{question['id']}}/new-answer">
                    <button type="submit">Answer question</button>
                </form>
                
                <form class="buttons" action="/question/{{question['id']}}/delete">
                    <button type="submit">Delete question</button>
                </form>
                <a href="/question/{{question['id']}}/edit"><button>Edit</button></a>
                {% else %}
                Answers: {{ question["answer_number"] }}
                {% endif %}
            </div>

        
            {% for answer in answers %}
            
                {% if answer["question_id"] == question["id"] %}
                <div class="answer">
                    <p>{{ answer["message"] }}</p>
                    <div class="buttons">

                        <p>Votes: {{ answer["vote_number"]}}</p>

                        <form class="buttons" action="/answer/{{answer['id']}}/vote-up">
                            <button type="submit">Vote Up</button>
                        </form>

                        <form class="buttons" action="/answer/{{answer['id']}}/vote-down">
                            <button type="submit">Vote Down</button>
                        </form>

                        <form class="buttons" action="/answer/{{answer['id']}}/delete">
                            <button type="submit">Delete answer</button>
                        </form>    
                    </div>
                </div>
                {% endif %}
              
            {% endfor %}
       
    </div>
    {% endfor %}
{% endblock %}