{% extends 'layout.html' %}

{% block content %}

    <form action="{{url_for('search_questions')}}" method="POST">
            <input type="text" name="search_phrase" placeholder="Search...">
            <input type="submit" value="Submit">
    </form>

    </form>
        <div>
            <form method="GET" action="/sorted/">
                <label for="condition">Order by:</label>
                    <select name="condition">
                        <option selected value="submission_time">submission time</option>
                        <option value="vote_number">votes</option>
                        <option value="view_number">views</option> 
                    </select>
                    <select name= "order">
                        <option selected value="desc">descending</option>
                        <option value="asc">ascending</option>
                    </select>
                    <button type="submit">GO</button>
            </form>
        </div>   
       

    {% for question in questions %}

        <div class="content">
            
                {% if question_id %}
                <div class="buttons">
                    <a href="/question/{{question['id']}}/new-answer"><img width=40px height=25px src="{{ url_for('static', filename='answer.png') }}"></a>
    
                    <a href="/question/{{question['id']}}/delete"><img width=25px height=25px src="{{ url_for('static', filename='Trash.png') }}"></a>
                    
                    <a href="/question/{{question['id']}}/edit"><img width=25px height=25px src="{{ url_for('static', filename='edit.png') }}"></a>
                </div>
                {% endif %}
            
            <a href="/question/{{question['id']}}"><h2> {{ question["title"] }}</h2></a>
                        
            <div class="message-box">
                <div class="vote">
                        <a href="/question/{{question['id']}}/vote-up"><img src="{{ url_for('static', filename='1arrow_up.png') }}"></a>
                        
                            {{ question["vote_number"] }}
                        
                        <a href="/question/{{question['id']}}/vote-down"><img src="{{ url_for('static', filename='1arrow_down.png') }}"></a>
                </div>
            
                {% if question_id %}
                    <h3>
                        {% for line in question["message"] %}
                            {{ line }}<br>
                        {% endfor %}
                    </h3>
                {% else %}

                <h3>
                    {% for line in question["message"][:8] %}
                        {{ line }}<br>
                    {% endfor %}
                </h3>

            {% endif %}
            </div>

                    
                {% if not question_id %}
                    <p>Answers: {{ question["answer_number"] }} <br>
                    Submited: {{question["submission_time"] }} <br>
                    Viewed: {{ question["view_number"] }} times</p>
                {% endif %}
                
                {% if question["tag"] %}
                {% if question["tag"]!=None %}
                Tag: {{ question["tag"] }}
                {% endif %}
                {% endif %}
                    

            
                {% for answer in answers %}
                
                    {% if answer["question_id"] == question["id"] %}
                    <div class="answer">

                        <div class="message-box">
                            <div class="vote">
                                <a href="/answer/{{answer['id']}}/vote-up"><img src="{{ url_for('static', filename='1arrow_up.png') }}"></a>
                                    
                                    {{ answer["vote_number"] }}
                                    
                                <a href="/answer/{{answer['id']}}/vote-down"><img src="{{ url_for('static', filename='1arrow_down.png') }}"></a>
                            </div>
                        <h4>
                            {% for line in answer["message"] %}
                                {{ line }}<br>
                            {% endfor %}
                        </h4>
                        </div>

                        <div class="answer_buttons">
                            <a href="/answer/{{answer['id']}}/delete"><img width="25px" height="25px" src="{{ url_for('static', filename='Trash.png') }}"></a>
                        </div>
                    </div>
                    {% endif %}
                
                {% endfor %}
        
        </div>
    {% endfor %}
{% endblock %}